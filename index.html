<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HRAC Question Practice Page</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="index-page">

    <div id="announcementBar" class="announcement-bar">
        </div>

    <div class="main-content">
        <h1>HRAC Question Practice Page</h1>
         
        <div class="button-section">
            <h2 class="section-header">Classes</h2>
            <div class="button-group">	
                <a href="./practice111.html" class="hvac-button">HRAC 111</a>
                <a href="./practice112.html" class="hvac-button disabled-button">HRAC 112</a>
                <a href="./practice113.html" class="hvac-button">HRAC 113</a>
                <a href="./practice124.html" class="hvac-button">HRAC 124</a>
            </div>
        </div>

        <div class="button-section">
            <h2 class="section-header">Books</h2>
            <div class="button-group">	
                <a href="#" class="hvac-button disabled-button">R&amp;C Technology</a>
                <a href="#" class="hvac-button disabled-button">Reg 149.1</a>
            </div>
        </div>
    </div>

    <button id="commentButton" class="floating-button" onclick="openCommentModal()">
        Comment
    </button>
    
    <div id="commentModal" class="modal-overlay">
        <div class="modal-content">
            <h3>Send Feedback</h3>
            <p>Your comments help improve the page. Please enter your email and feedback below. Clicking "Send Comment" will open your email client.</p>
            <form id="commentForm">
                <input type="email" id="userEmail" placeholder="Your Email (optional)" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px;">
                <textarea id="userComment" placeholder="Your feedback here..." rows="5" required style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 5px;"></textarea>
                <button type="submit" class="hvac-button" style="background-color: var(--secondary-color); width: 100%; margin: 0;">Send Comment</button>
            </form>
            <button onclick="closeCommentModal()" class="hvac-button" style="background-color: var(--disabled-color); width: 100%; margin-top: 10px;">Cancel</button>
        </div>
    </div>

<script>
    /**
     * Loads the announcement text from the separate 'announcement.txt' file 
     * and inserts it into the announcement bar inside the scrolling element.
     */
    async function loadAnnouncement() {
        const announcementBar = document.getElementById('announcementBar');
        const announcementFile = 'file/announcement.txt'; 

        try {
            const response = await fetch(announcementFile);
            
            if (response.ok) {
                const text = await response.text();
                
                // Only display the bar if the file contains text
                if (text && text.trim().length > 0) {
                    const announcementText = text.trim();
                    
                    // Insert the text inside the new scrolling element
                    announcementBar.innerHTML = `<span class="announcement-text">${announcementText}</span>`;
                    announcementBar.style.display = 'block';
                }
            } else {
                console.warn(`Announcement file not found or failed to load: ${response.status}`);
            }
        } catch (error) {
            console.error('Error fetching announcement:', error);
        }
    }

    // Call the function when the page loads
    loadAnnouncement();

    // ðŸ”‘ NEW: Comment Modal Functions
    const commentModal = document.getElementById('commentModal');
    const commentForm = document.getElementById('commentForm');
    const userEmailInput = document.getElementById('userEmail');
    const userCommentInput = document.getElementById('userComment');
    const recipientEmail = 'thaibinh11287@gmail.com';

    function openCommentModal() {
        commentModal.style.display = 'flex';
        // Reset form fields when opening
        commentForm.reset(); 
    }

    function closeCommentModal() {
        commentModal.style.display = 'none';
    }

    // Handle form submission to create the mailto: link
    commentForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const email = userEmailInput.value.trim();
        const comment = userCommentInput.value.trim();
        
        // Encode for URL safety
        const subject = encodeURIComponent(`Website Feedback from ${email || 'Anonymous User'}`);
        const body = encodeURIComponent(`User Email: ${email || 'N/A'}\n\nComment:\n${comment}`);
        
        // Construct the mailto link
        const mailtoLink = `mailto:${recipientEmail}?subject=${subject}&body=${body}`;
        
        // Open the user's default email client
        window.location.href = mailtoLink;
        
        // Optionally close the modal after generating the link
        closeCommentModal();
    });
</script>

</body>
</html>